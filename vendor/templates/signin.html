<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/3cc21c4012.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"  crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap">
    <title>Vendor signin</title>
  </head>
  <body>
    <!---navbar-->
    <nav class="topnav navbar navbar-dark bg-dark justify-content-between" style="padding-left: 2%;" >
      <a class="navbar-brand"\><h1>Find<span style="color: #198754;">Me</span></h1></a> 
      <!-- <a style="text-decoration: none; color: white; margin-right: 3%;" href="{% url 'signup' %}" class="link-info"><button class="btn btn-outline-success" type="submit" >signup</button></a> -->
      <a style="text-decoration: none; background-color: #198754 ; color: white; margin-right: 3%; width: 7%; height: 5%;" href="{% url 'signup' %}" class="link-info text-center"><button class="btn" style="color: white; width: fit-content;" type="submit" >Register</button></a>
      
    </nav>

    <!-- <div id="email_div" style="display: block;" >

      <label for="email">Email</label>
      <input type="text" name="email" id="email">
      <button  onclick="ajax_send_otp()">Send OTP</button>
  </div>
  <div id="verify_text_div"></div>
  <div id="otp_div" style="display: none;" >
  
      <label for="email">OTP</label>
      <input type="text" name="otp" id="otp">
      <button  onclick="verify_otp()">Verify</button>
  </div> -->
  {% if messages %}
  <div style="width:500px; background-color: #eee; margin-left: 34%; margin-top: 0.5%;">
      {% for message in messages %}
        <div class="alert alert-info width-50 align-items-center for-alert p-0" role="alert">
          <p class="text-center text-lg" data-dismiss="alert">{{ message }}</p>
        </div>
      {% endfor %}
  </div>
  {% endif %}

<section class="vh-100" style="background-color: #eee;">
  <div class="container h-100" style="height: 60%; margin-top: -4%;">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="card text-black " style="border-radius: 25px; height: fit-content;  width: 55%;">
            <div class="row justify-content-center" style="padding: 5%;">
              <p class="text-center h2 fw-bold mb-3 ">Business Login</p>
              <form action="signin" method="POST">
                {% csrf_token %}
                  <div class="d-flex flex-row align-items-center " style="width: 90%; padding: 4%;">
                    <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0" >
                      <label id="Email" class="form-label" for="form3Example3c"><h5>Email</h5></label>
                      <input type="email" name="email" id="email" class="form-control" value="{{values.email}}" placeholder="example@gmail.com" required style="width:100%"/> 
                      
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4" style="width: 90%; padding: 4%;"> 
                    <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <label  class="form-label" for="form3Example4c"><h5>Password</h5></label>
                      <input type="password" name="password" id="password" class="form-control" required style="width:100%"/> 
                      
                    </div>
                  </div>

                  <!-- <div class="pt-1 mb-4">
                      <button class="btn btn-info btn-lg btn-block" type="button">Login</button>
                    </div> -->
                    <div class="d-flex justify-content-center">
                      <input type="submit" value="Login" class="btn btn-primary btn-lg bg-dark" style="width: 20%; padding: 0%;">
                  </div>
        
                    <p style="margin-left: 4%;"><a class="text-muted" href="#!">Forgot password?</a></p>
                    <p style="margin-left: 4%;">Don't have an account? <a href="{% url 'signup' %}" class="link-info">Register here</a></p>

                    
                </form>
              <!-- <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">
                <img src="https://mdbootstrap.com/img/Photos/new-templates/bootstrap-registration/draw1.png" class="img-fluid" alt="Sample image">
              </div> -->
            </div>
          </div>
    </div>
  </div>
</section>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type='text/javascript'></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
    <script>
      var otp_from_back="";
      function ajax_send_otp(){
         document.getElementById("email_div").style.display='none';
         email = document.getElementById("email");
       $.post("send_otp",
           {
               "email":email.value,
               "csrfmiddlewaretoken":"{{csrf_token}}"
           },
           function(data, status){
               if(status=="success"){
                   otp_from_back = data;
                   document.getElementById("otp_div").style.display='block';
                   }
      }
      );
      }
     function verify_otp(){
         var user_otp=document.getElementById("otp").value;
         if (user_otp==otp_from_back){
             document.getElementById("verify_text_div").style.color="green";            
             document.getElementById("verify_text_div").innerHTML="OTP Verified";
             document.getElementById("otp_div").style.display="none";
             document.getElementById("form_div").style.display="block";
         }
         else{
             document.getElementById("verify_text_div").style.color="red";
             document.getElementById("verify_text_div").innerHTML="Try Again!!";
         }
     } 
  </script>
 
  </body>
</html>

