<!DOCTYPE html>
{% load static %}

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>FindMe</title>
    <!-- MDB icon -->
    
    <!-- Font Awesome -->
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap"
    />
    <!-- MDB -->
    <!-- <link rel="stylesheet" href="http://localhost:5000/css/mdb.min.css" /> -->
    <style>
        *{
            margin: 0;
            padding: 0;
        
        }
        
        
        body{
            background-color: whitesmoke;
            font-family: sans-serif
        }
        .navbar{
            max-height: 80px;
            max-width: 100%;
        }
        .form-inline{
            /* margin: -10px 10px 0px 2px; */
            display: flex;
        }
        .form-control{
            min-width: 500px;
            margin: 3px 5px 0px 0px;
        }
        
        .navbar-brand{
            padding: 2px 20px 1px 20px;
        }
        
        .username{
            color: aliceblue;
            font-size: 20px;
            margin-right: 4%;
        }
        
        
        
          .username{
              margin-right: 4%;
          }
          
         .topnav .icon {
          display: none;
        }
        
        
          @media screen and (max-width: 600px) {
            .topnav a:not(:first-child) {display: none;}
            .topnav a.icon {
                float: right;
                display: block;
                margin-right: -50%;
            }
        
            }
        
            @media screen and (max-width: 992px) {
                body {
                    background-color: blue;
                }
            }
        
            @media screen and (max-width: 600px) {
        
                body {
                    background-color: black;
                }
                .topnav.responsive {position: relative;}
                .topnav .responsive .icon {
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                #search{
                    display: block;
                    width: 10%;
                    float: left;
                    margin-right: 0%;
                }
                .topnav .responsive a {
                    float: none;
                    display: block;
                    text-align: left;
                    
                }
               
                .navbar-brand{
                    display: block;
                    padding: 0px 0px 0px 0px;
                    size: 10px;
                }
            }
        
            .dropbtn {
                background-color: #04AA6D;
                color: white;
                padding: 16px;
                width:110px;
                font-size: 16px;
                border: none;
              }
              
              .username {
                position: relative;
                display: inline-block;
              }
              
              .dropdown-content {
                display: none;
                position: absolute;
                background-color: #f1f1f1;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
              }
              
              .dropdown-content a {
                color: black;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
                font-size:13px;
              }
              
              .dropdown-content a:hover {background-color: #ddd;}
              
              .username:hover .dropdown-content {display: block;}
              
              .username:hover .dropbtn {background-color: #3e8e41;}
    </style>
  </head>
  <body>
    <!-- Start your project here-->
    <nav class="topnav navbar navbar-dark bg-dark justify-content-between">
        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
            <i class="fa fa-bars"></i>
        </a>
        <a class="navbar-brand" href="{% url 'main' %}"><h1>Find<span style="color: #198754;">Me</span></h1></a>
        {% comment %} <a class="navbar-brand"><h1>Find<span style="color: #198754;">Me</span></h1></a> {% endcomment %}
      <form id="search" class="form-inline" method="GET" action="{% url 'search' %}">
        {% csrf_token %}
        <input class="form-control mr-sm-2 search" type="text" placeholder="Search" aria-label="Search" name="keyword" required>
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit" >Search</button>
      </form>
      <div class="username">
          <button class="dropbtn">{{ username }}</button>
          <div class="dropdown-content">
            <a href="{% url 'my_orders' %}">My Orders</a>
        <a href="{% url 'cart' %}">My Cart</a>
        <a href="{% url 'wishlist' %}">My wishlist</a>
        <a href="{% url 'edit_profile' %}">Edit Profile</a>
        <a href="{% url 'logout' %}">Logout</a>
          </div>
    </div>
    </nav>
    {% if messages %}
    <div style="width:500px; background-color: #eee; margin-left: 34%; margin-top: 0.5%;">
        {% for message in messages %}
          <div class="alert alert-info width-50 align-items-center for-alert p-0" role="alert">
            <p class="text-center text-lg" data-dismiss="alert">{{ message }}</p>
          </div>
        {% endfor %}
    </div>
    {% endif %}<br><br><br>
    <section class="section-content padding-y bg">
        <div class="container">
    
            <!-- ============================ COMPONENT 1 ================================= -->
            <h4 class="text-center mb-20">Review Your Order</h4>
            <div class="row">
    
                <aside class="col-lg-8">
                    <div class="card">
                        <h5 class="card-header">Billing Address</h5>
                        <div class="card-body">
                            <p class="card-text mb-0">{{order.full_name}}</p>
                            <p class="card-text mb-0">{{order.full_address}}</p>
                            <p class="card-text mb-0">{{order.city}}, {{order.state}}</p>
                            <p class="card-text mb-0">{{order.country}}</p>
                            <p class="card-text mb-0">{{order.email}}</p>
                            <p class="card-text mb-0">{{order.phone}}</p>
                            {% if order.order_note %}
                            <b>Order Note: </b> {{order.order_note}}
                            {% endif %}
    
    
                        </div>
                    </div>
                    
                    <div class="card">
                        <h5 class="card-header">Review Products</h5>
                        <div class="card-body">
                            <table class="table table-borderless table-shopping-cart">
                                <thead class="text-muted">
                                    <tr class="small text-uppercase">
                                        <th scope="col">Product</th>
                                        <th scope="col" width="120">Quantity</th>
                                        <th scope="col" width="120">Price</th>
    
                                    </tr>
                                </thead>
                                <tbody>
    
                                    {% for cart_item in cart_items %}
                                    <tr>
                                        <td>
                                            <figure class="itemside align-items-center">
                                                <div class="aside"><img  height="100px" width = "100px" src="uploads/{{ cart_item.product_image }}" alt='{{cart_item.product_image}}'></div>
                                                <figcaption class="info">
                                                    <a href="{{ cart_item.product.get_url }}" class="title text-dark">{{ cart_item.product.product_name }}</a>
                                                    <p class="text-muted small">
                                                        {% if cart_item.variations.all %}
                                                        {% for item in cart_item.variations.all %}
                                                        {{ item.variation_category | capfirst }} : {{ item.variation_value | capfirst }} <br>
                                                        {% endfor %}
                                                        {% endif %}
                                                    </p>
                                                </figcaption>
                                            </figure>
                                        </td>
                                        <td>
                                            <!-- col.// -->
                                            <label for="">{{cart_item.quantity}}</label>
                                        </td>
                                        <td>
                                            <div class="price-wrap">
                                                <var class="price">Rs {{ cart_item.sub_total }}</var>
                                                <small class="text-muted"> Rs {{ cart_item.product.price }} each </small>
                                            </div> <!-- price-wrap .// -->
                                        </td>
    
                                    </tr>
                                    {% endfor %}
    
                                </tbody>
                            </table>
    
                        </div>
                    </div>
    
                </aside> <!-- col.// -->
                <aside class="col-lg-4">
    
                    <div class="card">
                        <div class="card-body">
                            <dl class="dlist-align">
                                <dt>Total price:</dt>
                                <dd class="text-right">Rs{{total}}</dd>
                            </dl>
                            <dl class="dlist-align">
                                <dt>Tax:</dt>
                                <dd class="text-right"> Rs. {{tax}}</dd>
                            </dl>
                            <dl class="dlist-align">
                                <dt>Grand Total:</dt>
                                <dd class="text-right text-dark b"><strong>Rs. {{grand_total}}</strong></dd>
                            </dl>
                            <hr>
                            <p class="text-center mb-3">
                                <img src="{% static './images/misc/payments.png' %}" height="26">
                            </p>
    
    
                            <div id="paypal-button-container">
                                <!-- PayPal Button Will Load -->
                            <a href="{% url 'review_place_order' %}" class="btn btn-primary btn-block">Place Order</a>

                            </div>
    
                        </div> <!-- card-body.// -->
                    </div> <!-- card.// -->
                    <div class="alert alert-danger" role="alert">
                      <b>Please Note: </b>This is a demo website. Do not try to make real payments.
                    </div>
                </aside> <!-- col.// -->
    
    
            </div> <!-- row.// -->
    
            <!-- ============================ COMPONENT 1 END .// ================================= -->
    
        </div> <!-- container .//  -->
    </section>
    <!-- End your project here-->

    <!-- MDB -->
    <!-- <script type="text/javascript" src="/js/mdb.min.js"></script> -->
    <!-- Custom scripts -->
    <!-- <script>
			const form = document.getElementById('login')
			form.addEventListener('submit', login)

			async function login(event) {
				event.preventDefault()
				const email = document.getElementById('Email').value
				const password = document.getElementById('Password').value

				const result = await fetch('/api/login', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						email,
						password
					})
				}).then((res) => res.json())

				if (result.status === 'ok') {
					// everythign went fine
					console.log('Got the token: ', result.data)
					localStorage.setItem('token', result.data)
					alert('Success')
          window.location.href = "/templates/main.html";
				} else {
					alert(result.error)
				}
			}
		</script> -->
  </body>
</html>
